<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Evo-Devo Bird</title>
  
  <subtitle>Hello Friend!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xieduo7.github.io/"/>
  <updated>2018-04-14T11:30:56.326Z</updated>
  <id>https://xieduo7.github.io/</id>
  
  <author>
    <name>Duo Xie</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>暴裂无声，落地有形:《大佛普拉斯》与《暴裂无声》的一个感想</title>
    <link href="https://xieduo7.github.io/2018-04-14-%E6%9A%B4%E8%A3%82%E6%97%A0%E5%A3%B0%EF%BC%8C%E8%90%BD%E5%9C%B0%E6%9C%89%E5%BD%A2.html"/>
    <id>https://xieduo7.github.io/2018-04-14-暴裂无声，落地有形.html</id>
    <published>2018-04-14T10:26:30.000Z</published>
    <updated>2018-04-14T11:30:56.326Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>我翻开历史一查，这历史没有年代，歪歪斜斜的每叶上都写着“仁义道德”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“吃人”！ ——鲁迅《狂人日记》<br><img src="/images/2018-04/大佛普拉斯1.jpg" alt="《大佛普拉斯》海报"><br><a id="more"></a><br>内含一定剧透，建议先看完电影再继续往下看</p><hr><p>在开始看文章前，建议点开下面这首音乐，这是《大佛普拉斯》的片尾曲，名字叫做《有无》，在第54届金马奖上获得了<strong>最佳原创电影歌曲</strong>（当然，《大佛普拉斯》的原声配乐也很好听，强烈推荐看完电影后去网易云上听一听，btw，其中评论数最高的那首配乐的最热评论就是我写的，我就不说具体哪一首了）。<br>        <div id="aplayer-tVHvsNBN" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-tVHvsNBN"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "有无",              author: "林生祥",              url: "youwu.mp3",              pic: "/2018-04-14-暴裂无声，落地有形/有无封面.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script></p><h1 id="阶级"><a href="#阶级" class="headerlink" title="阶级"></a>阶级</h1><p>昨天终于去看了去年9月份就开始期待的《暴裂无声》，看完这部电影后我的感受和看完《大佛普拉斯》感受很相似，我之所以觉得《暴裂无声》和《大佛普拉斯》的感受很相似，不是这两个电影的剧情很相似，而是两部电影的人物很相似，说两个人物相似也不是说这两个主角的遭遇相似，<strong>而是这两个主角的社会地位相似</strong>，不仅两个主角的社会地位相似，在两部电影中他们所要对抗的对手的社会地位也很相似。<br>两部电影主角：《暴裂无声》中的张保民一个是煤矿工人，《大佛普拉斯》里的肚财以捡垃圾为生，从社会的生态位上来说，<strong>一个是初级消费者，另一个介于初级消费者与分解者之间</strong>，前者还在创造着一定的社会价值，而后者只能拿别人不要的东西，虽说两者社会地位相似，但前者比后者还要高一些。<br>而两部电影主角的对头：《暴裂无声》里的煤矿老板昌万年是煤矿老板，每一个毛孔中都渗透着来自张保民们的血液；《大佛普拉斯》里的董事长黄启文是艺术家老板，拥有着足以碾死肚财们的力量，这两个人都是次级消费者，通过剥削初级消费者的剩余价值来获得资本积累，有趣的是，<strong>在电影里面，这两个人都喜欢戴假发</strong>。<br>而两部电影中所要探讨的一个问题是，当社会地位处于低端的人受到来自社会上层的冲击的时候会发生什么？ 在《暴裂无声》里，当一个无法说话的煤矿工人丢掉了自己的孩子，没有足够的社会资源，又没有审时度势眼光和冷静清醒的头脑，有的只是一股横冲直撞的狠劲，最后得到的结果只能是拳打棉花，暴裂无声，然而你我和他自己以及这个社会都对此无能为力，只能报之以无力的同情。在《大佛普拉斯》里，当一个没有改造命运的能力的拾荒者人凝视了太久的深渊，无意中知道了艺术家老板的秘密之后，无可选择地只能被来自上层的车轮碾压至死，最后只留下了地上的一个人形。</p><h1 id="吃人"><a href="#吃人" class="headerlink" title="吃人"></a>吃人</h1><p>说到了阶级，不免要说下资产阶级和资本主义。资产阶级通常会被认为是剥削无产阶级的人，剥削的方式即通过剩余价值：剩余价值是指剥削劳动者所生产的新价值中的利润（劳动创造的价值和工资之间的差异），即“劳动者创造的被资产阶级无偿占有的劳动”。我之前常常会想，资产阶级之所以占有了大量的剩余价值是因为其能力和魄力要高于普通的无产阶级，从而使其占有了大量的社会财富，但是现在我认为，<strong>在你成为资本家之前，能力与魄力对于资本家很重要，而当你成为资本家以后，最为重要的是你可以调动大量的人力资源和社会资源来完成自己想做的事情</strong>，从而实现资本的积累，但是在这个社会中，资本家寥寥，而无产阶级芸芸。我们知道腾讯是马化腾的，阿里巴巴是马云的，华为是任正非的，但我们经常忽略的就是站在他们身后的每天加班加点成千上万的程序员用生命和健康来换取生活的程序员们。这也许是我们忽略的一点：资产阶级之所以为资产阶级是因为他占有了大量的剩余价值，无产阶级之所以为无产阶级是因为他们被剥削了剩余价值，这也许就是鲁迅在《狂人日记》中吃人的另一层含义吧：压迫与被压迫，剥削与被剥削。<strong>当然，总要有人被压迫，总要有人被剥削，这就是现实，它是我们的宿命，悲哀而无法改变</strong>，而《大佛普拉斯》和《暴裂无声》表达的就是一种这样的悲哀。<br>当然，这两部电影肯定都还有很多解读方向，但是我看到的就是人与人之间的巨大差距，以及极端不平衡的进化优势。虽然我们都喜欢同情弱者，村上春树也说过在鸡蛋和墙之间自己永远选择鸡蛋，但是这个世界并不是因为你的社会地位相对弱势就会对你报以同情，即使你是正义的一方。正因如此，即使要想与上层的社会反抗，最后也只能在无声中暴烈，然后落向地面，只留下一个轮廓。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我翻开历史一查，这历史没有年代，歪歪斜斜的每叶上都写着“仁义道德”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“吃人”！ ——鲁迅《狂人日记》&lt;br&gt;&lt;img src=&quot;/images/2018-04/大佛普拉斯1.jpg&quot; alt=&quot;《大佛普拉斯》海报&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="浮光掠影/电影" scheme="https://xieduo7.github.io/categories/%E6%B5%AE%E5%85%89%E6%8E%A0%E5%BD%B1-%E7%94%B5%E5%BD%B1/"/>
    
    
      <category term="电影" scheme="https://xieduo7.github.io/tags/%E7%94%B5%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>哈佛《幸福课》之完美主义:完美是一种病</title>
    <link href="https://xieduo7.github.io/2018-04-11-%E5%93%88%E4%BD%9B%E5%B9%B8%E7%A6%8F%E8%AF%BE%E4%B9%8B%E5%AE%8C%E7%BE%8E%E4%B8%BB%E4%B9%89.html"/>
    <id>https://xieduo7.github.io/2018-04-11-哈佛幸福课之完美主义.html</id>
    <published>2018-04-11T13:34:30.000Z</published>
    <updated>2018-04-11T13:34:48.861Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>说到处女座，大家第一反应是”完美主义”，完美主义因为里面含有<strong>完美</strong>两个字，让我们误以为<strong>完美主义是一个褒义词</strong>，但是</p><a id="more"></a><p>我在知乎上搜索了<strong>完美主义</strong>相关问题后，有一位<a href="https://www.zhihu.com/question/20759341/answer/16086702" target="_blank" rel="noopener">答主</a>将<strong>完美主义</strong>视作一个贬义词，并在答案里推荐了哈佛《幸福课》里的<strong>完美主义</strong>这一课， 于是我找到了视频来看，看完之后感觉这堂课真的是入木三分，如沐春风。于是想要把这堂课的内容总结下来，于是我看了第二遍，边看边总结，既是自己的一个总结，希望自己能过之能改，也希望其他人也能由此获益。同时，我不遗余力的向大家推荐<a href="http://open.163.com/movie/2006/1/6/K/M6HV755O6_M6I42KT6K.html" target="_blank" rel="noopener">这个视频</a>（链接里是网易公开课的链接，B站的资源在<a href="https://www.bilibili.com/video/av9781864/?p=15" target="_blank" rel="noopener">这里</a>）</p><h1 id="完美主义的病：不能容忍失败"><a href="#完美主义的病：不能容忍失败" class="headerlink" title="完美主义的病：不能容忍失败"></a>完美主义的病：不能容忍失败</h1><p>完美主义者往往对自己要求很高，从而导致自己无法接受失败。但是我们常常说<strong>失败是成功之母</strong>，这句话让大家总是感受到一点鸡汤的味道，但是这句话确实是有道理的，说它有道理不是说它仅仅在理论上正确，而是说技术上也是正确的。<br>首先定义一下什么是成功，我在这里对成功的定义是<strong>把一件需要一定技巧和脑力的事情做成</strong>。它可以是成功地炒了一道让自己让别人都满意的菜，也可以是写出了一个可以解决实际问题的程序，或者于是你学会了如何去画一个圆圈。<br>为了更为形象地解释这个道理，在课堂上Tal老师叫一个学生上去画圆圈，一开始让这个学生画一个尽可能完美的圆，然后又让学生画一个一年级水平学生画出来的圆，最后又让学生画一个一岁婴儿画出来的圆（如下图），最后老师来给这三个圆打分，不出所料，第一个圆及格，而第二个和第三个不及格。紧接着老师说，很抱歉，虽然你的第二个和第三个圆不及格，但是如果没有画过这两个圆，你能否画出第一个圆？<br>Tal老师这个例子举得发人深省，不仅仅是画圆，其他事情也是如此。如果在写程序是不出现一些bug不对程序做一些调试，我们永远都不知道我们哪些写的是对的哪些写得是错的，而如果不知道哪些是错的，我们以后就无法在写程序时避开这些错误，也就很难说我们真正掌握了一门编程语言。炒菜也是一样，如果不炒一些难吃菜出来，我们就不知道我们哪些调料该放多些，哪些该放少一些，火候该猛一些还是要柔一些。<br>从控制论的角度来讲，我们如果要掌握一门技能，或者说要控制一样东西，我们需要知道去如何控制，而如果要知道如何控制，就需要我们掌握一定量的信息，即我们不仅仅需要知道<strong>该怎么做，更要知道不应该怎么做</strong>，只有我们走一些弯路，犯一些错误以后才能深刻体会到不该怎么做。因此，犯错误是必须要走的路。<br>总而言之，成长过程中我们必须容忍我们犯错误，当然，没有人愿意犯错误，没有人喜欢失败，但是这是成长过程中的一部分，跌倒了，爬起来，下次知道哪里有坑然后绕开就是了。而完美主义者总是不容许自己出现失败，不容许自己出现错误，为什么完美主义者不容许自己出现错误？</p><h1 id="完美主义者vs最优主义者"><a href="#完美主义者vs最优主义者" class="headerlink" title="完美主义者vs最优主义者"></a>完美主义者vs最优主义者</h1><p><img src="/images/完美主义.png" alt="完美主义者 vs 最优主义者"><br>我们可以笼统粗暴地把人分为两类人，一类人是完美主义者（Perfectionist），另一类是最优主义者(Person commited to excellence ),这两种人的区别和特点在于对待人生中某一个过程的看法（即从A到B）是：完美主义者认为在人生过程中从A点到B点存在一条直线，因此完美主义者认为从A到B的过程必须沿着这条直线前进，<strong>任何对这条直线的偏离都将会导致失败</strong>。而最优主义者虽然也像完美主义者一样雄心勃勃，但是最优主义者明白现实生活中从A到B点并不存在一条直线，从A点到B点的过程中必将经历曲折，且在这个前进过程中，失败与挫折不可避免（例如在某些考试中不会得到自己想要的分数；没有评上奖学金），而在遇到失败后，最优主义者不会像完美主义者那样认为自己已经完了，而是从失败中汲取经验教训，然后成长变得更强。<br>然而冰冷的现实生活告诉我们，人生没有直线和捷径，要做成任何一件事必将经历曲折的过程：在Linux下安装gcc和R的过程是曲折的，提取DNA的过程是曲折的，发表一篇论文的过程是曲折的，这些曲折的出现并不是因为我们自己不够优秀，是因为它们是生活中不可避免的一部分，<strong>完美主义者并不是对自己要求高，而是对于现实生活的认识不够成熟，总是以为成功路上存在捷径</strong>，但是捷径是不存在的。</p><h1 id="劳碌命"><a href="#劳碌命" class="headerlink" title="劳碌命"></a>劳碌命</h1><p>完美主义者总是不满足于现状，这种进取之心虽然经常会给我们带来动力，但是这样经常会让他们的人生充满压力，他们总是以为当有一天从A点到达B点之后就可以轻松了，但是事实是一旦有了这种心态，那么人生永远都不可能轻松，这就是我们常说的劳碌命（rat racer）。我们不妨来看这样一个故事：</p><blockquote><p>我们姑且称这个人为X，X在上幼儿园和学前班之前一直生活的很快乐，但是当他进入小学的时候，压力就随之而来了，因为他意识到，如果自己想要去一所好的初中，就必努力学习并做到最好以面对激烈的竞争，因此他的压力越来越大，他也不再有上小学之前那种学习的快乐，在平日里要努力学习，只有在节假日和刚刚结束考试的日子里才能享受到片刻的放松。最后，功夫不负有心人，他终于进入了自己理想的初中。<br>由于之前的目标已经完成，他感觉良好，但是这种感觉也只是维持了两周，因为他的下一步是要考取自己理想中的高中，这所高中是他梦寐以求的学校，于是他在初中期间拼命努力学习，虽然他并不喜欢这种感觉。最后，他如愿以偿地进入了自己理想的高中。<br>他为此欣喜若狂，但是这种喜悦只维持了一周。这所学校竞争更加激烈，他参加了两个校体育队和三个学生社团，他每天疲于奔命，但是他想，这种忙碌是暂时的，等他考上了自己理想的大学一切都值了。最后，他终于收到了自己心仪大学的录取通知书。他再一次欣喜若狂，这一次，他比之前被理想高中录取还要高兴，他觉得自己终于可以放松了。<br>在刚刚进入大学的时候他很放松，但是刚刚过了新生周，他就开始了自己的忙碌。因为期中考试马上就要到来，这里竞争很激烈，大家学习都很努力，他也不得不努力学习。除了学习，他参加了两个校队和一个社团，以期望得到自己理想公司的岗位，因为得到那个岗位很难。功夫不负有心人，他最终得到了梦寐以求的岗位。但是他又有了新的目标-进入商学院，这样就能商界一帆风顺。于是他努力工作，没有付出便没有收获，通过自己的努力，他最终进入了商学院，从商学院毕业后成为了公司职员，他对此感到满意，然而好景不长，他又有了新的目标-成为公司的合伙人，于是他又为此努力工作，每天充满压力，终于，他成为了公司的合伙人。然而好景又不长，他现在只是初级合伙人，为了成为高级合伙人，他不得不再次为此付出努力，他每天充满压力和焦虑，然而由于他的出色工作，最终他成为了这个公司的高级合伙人。他为此给自己买了个度假别墅，高兴了一阵子。但是好景又又又不长，他想成为这个公司的CEO，他有为此拼命工作，终于皇天不负有心人， 他成为了这家公司的首席执行官，登上了《华尔街日报》封面。<br>公司在他治下井井有条，董事会对他的工作很满意。有一天，他进入了自己的办公室，把腿放在了桌子上，向后张望着中央公园的美景。然而此时董事会主席敲门走了进来，告诉他：谢谢您的工作，公司在您治下业绩出色，但是现在您该退休了。<br>此时他已经74岁了。</p></blockquote><p>这就是我们想象中劳碌命所能过到的最好的一生。当一个目标没有达成时，他总是全神贯注于这个目标，想着当目标完成时就可以休息了，但是当目标完成时，新的目标又出现了，如此循环往复，永无停歇。<br>因此，<strong>我们每个人要问一问自己到底想要什么样的生活？现在的生活究竟是不是自己想要的？</strong></p><h1 id="在生活中多尝试"><a href="#在生活中多尝试" class="headerlink" title="在生活中多尝试"></a>在生活中多尝试</h1><p>Wiseman教授做了一个研究想看看如何能遇到更多的好运气，研究表明，要想拥有好运气，就要多尝试走不同的道路，多做一些偏离之前道路的事情，只有这样我们才能遇到新的东西，给我们的生活带来改变，而完美主义者常常拒绝偏离改变，他们觉得只有照着之前的路来走才能通向成功。</p><h1 id="二八原则"><a href="#二八原则" class="headerlink" title="二八原则"></a>二八原则</h1><p>我们都听说过二八原则，即80%的财富掌握在20%人的手里，推而广之，80%的收入来源于20%的客户，80%的工作可以在20%的时间内完成。这个原理可以从两个方面去应用。<br>第一，我们要知道我们工作中哪些工作是关键的或者是对自己来说比较重要的工作，这些工作就是80%的工作，然后用我们20%的时间去优先完成。<br>第二，我们每个人每天都有高峰期和低谷期，我们要找到自己的高峰期，然后用这个高峰期去完成80%的工作。</p><h1 id="完美主义的来源"><a href="#完美主义的来源" class="headerlink" title="完美主义的来源"></a>完美主义的来源</h1><p><strong>完美主义很大程度来源于社会环境</strong>。我们从小就被鼓励少犯错和得到成功。当我们学会走路时，家长会说“干的漂亮”，当我们考了高分时，家长会说“太棒了，奖励你一个星星”。从家长，老师到媒体，学校，大家只会关心结果，没有谁会因为努力而被受到奖励，这样的社会环境改变了我们，关注结果而不关心过程的模式在我们头脑中根深蒂固，这样直接导致我们舍本逐末，不关心过程，不喜欢遭受曲折和失败。</p><h1 id="没有完美的关系"><a href="#没有完美的关系" class="headerlink" title="没有完美的关系"></a>没有完美的关系</h1><p>我们总会觉得真正的爱情总是甜蜜的没有争吵的，但是争吵和纠结是爱情的一部分，当这一切发生时，我们要坦然面对并去解决问题。</p><h1 id="关于夸奖的实验"><a href="#关于夸奖的实验" class="headerlink" title="关于夸奖的实验"></a>关于夸奖的实验</h1><p>斯坦福大学的Carol Dweck 的研究表明：并不是所有夸奖都有好效果。总是夸奖孩子“你做的很棒！”、“你很聪明”、“我的小小爱因斯坦”并不是总能带来好效果。从长远看甚至会有害：会导致孩子的完美主义更加严重。<br>她找了一群10岁的学生，并将它们分成两组，实验第一阶段，两组学生都做同样的题目，而不同的是：第一组在做完题目后，老师们会夸奖每个学生“你做的太棒了”；而第二组在做完题目后，老师会对他们说“你很认真！努力地完成了题目！”。实验第二阶段，老师给学生出了两道题，然后告诉学生们其中一道题相对简单，更容易做对；而另一道题很难，但是学生们会获得更多。然后第一组中50%的学生选择了简单题，另外50%学生选择了难题；第二组中90%的学生选择了难题，另外10%选择了难题。实验第三阶段，老师让这些学生做一道非常难的几乎不可能做出来的几乎无解的题，然后第一组的学生在思考了一段时间后感到很沮丧，然后大多数人放弃了这道题。而第二组的学生很认真的思考这个题目并非常享受解题的过程，虽然最后他们也没能做出来，但是他们坚持了更长的时间。<br>Carol Dweck对这个结果的结论是(让我们在心里默念三遍这个掷地有声的结论)：<strong>强调努力的重要性给了学生一个可控的变量，他们觉得成功在自己的掌握当中，而强调天生的聪慧会剥夺学生对于成功的控制，也并没有给他们提供面对失败的策略。当你在夸奖了一个学生聪明之后，如果他们失败了，他们觉得自己不再聪明了，之后他们就会失去对工作的兴趣，而那些因为努力收到表扬的学生，面对困难时不会受挫，而且会士气高涨</strong>。</p><h1 id="如何克服完美主义"><a href="#如何克服完美主义" class="headerlink" title="如何克服完美主义"></a>如何克服完美主义</h1><ol><li>自我认知：认识到自己哪里有不足，然后去改正和提高，而不是视而不见</li><li>强调努力的重要性：以发展的眼光看世界，关注努力的过程，改变自己注重结果的思维方式</li><li>接受现实： 完美主义会贯穿我们的一生，我们需要不断与其作斗争。</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;说到处女座，大家第一反应是”完美主义”，完美主义因为里面含有&lt;strong&gt;完美&lt;/strong&gt;两个字，让我们误以为&lt;strong&gt;完美主义是一个褒义词&lt;/strong&gt;，但是&lt;/p&gt;
    
    </summary>
    
      <category term="务虚笔记/幸福课" scheme="https://xieduo7.github.io/categories/%E5%8A%A1%E8%99%9A%E7%AC%94%E8%AE%B0-%E5%B9%B8%E7%A6%8F%E8%AF%BE/"/>
    
    
      <category term="心理学" scheme="https://xieduo7.github.io/tags/%E5%BF%83%E7%90%86%E5%AD%A6/"/>
    
      <category term="完美主义" scheme="https://xieduo7.github.io/tags/%E5%AE%8C%E7%BE%8E%E4%B8%BB%E4%B9%89/"/>
    
  </entry>
  
  <entry>
    <title>Linux下源码安装R(干净版)</title>
    <link href="https://xieduo7.github.io/2018-04-09-Linux%E4%B8%8B%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85R(%E5%B9%B2%E5%87%80%E7%89%88).html"/>
    <id>https://xieduo7.github.io/2018-04-09-Linux下源码安装R(干净版).html</id>
    <published>2018-04-09T15:12:30.000Z</published>
    <updated>2018-04-09T15:33:51.441Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>去年10月份曾经写过一个比较曲折的R安装教程，里面给自己加了很多戏，本以为有那篇教程在前，这下在阿里云上部署R会是一马平川，没想到还是踩了几个之前没踩过的坑，于是将这次的教训跟之前的教程整理一下，写一个比较干净的教程。如果你们想体会下之前我安装R的内心戏，可以看下这篇文章<a href="/2018-04-02-R安装.html" title="Linux下安装R(心路历程版)">Linux下安装R(心路历程版)</a></p><a id="more"></a><p>这个教程主要分三个部分：1.主要库的准备；2.环境变量的配置；3.R主体的安装；4.其他可能遇到的问题及解决方案。</p><h1 id="1-主要库的准备"><a href="#1-主要库的准备" class="headerlink" title="1. 主要库的准备"></a>1. 主要库的准备</h1><blockquote><p>注：所有的builder文件夹都代表你的目标文件夹,你的库的源码的文件夹跟你要安装的目标文件夹最好分开</p></blockquote><p>1.1安装zlib<code>1.2.5版本及以上</code><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd zlib<span class="number">-1.2</span><span class="number">.11</span></span><br><span class="line">/export/app/src/zlib<span class="number">-1.2</span><span class="number">.11</span>/configure --prefix =/export/app/zlib<span class="number">-1.2</span><span class="number">.11</span></span><br><span class="line">make  </span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>1.2安装bzip<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd bzip2<span class="number">-1.0</span><span class="number">.6</span></span><br><span class="line">make -f Makefile-libbz2_so</span><br><span class="line">修改Makefile 中的PREFIX=/export/app/bzip2<span class="number">-1.0</span><span class="number">.6</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p><p>1.3安装liblzma<code>5.0.3版本及以上</code><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir xz<span class="number">-5.2</span><span class="number">.3</span></span><br><span class="line">cd xz<span class="number">-5.2</span><span class="number">.3</span></span><br><span class="line">/export/app/src/xz<span class="number">-5.2</span><span class="number">.3</span>/configure -prefix=/export/app/xz<span class="number">-5.2</span><span class="number">.3</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>1.4安装pcre<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir pcre-8.42</span><br><span class="line"><span class="keyword">cd</span> pcre-8.42</span><br><span class="line"><span class="string">/export/app/src/pcre-8.42/configure</span> <span class="params">--prefix</span> <span class="string">/export/app/pcre-8.42</span> <span class="params">--enable-utf</span> <span class="params">--enable-unicode-properties</span> <span class="params">--enable-jit</span> <span class="params">--disable-cpp</span> <span class="comment">##这个包的安装参数是有要求的，因此用的是官方文档的推荐命令</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>1.5安装libcurl<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf  curl<span class="number">-7.28</span><span class="number">.0</span>.tar.gz</span><br><span class="line">mkdir curl<span class="number">-7.28</span><span class="number">.0</span></span><br><span class="line">cd curl<span class="number">-7.28</span><span class="number">.0</span></span><br><span class="line">/export/app/src/curl<span class="number">-7.28</span><span class="number">.0</span>/configure --prefix=/export/app/curl<span class="number">-7.28</span><span class="number">.0</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>1.6配置<code>jdk</code><br>这个需要去<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">官网</a>下载适合你机器系统的版本，然后解压到相应文件夹。</p><h1 id="2-及环境变量的配置"><a href="#2-及环境变量的配置" class="headerlink" title="2.及环境变量的配置"></a>2.及环境变量的配置</h1><p>在<code>~/.bash_profile</code>中加入如下环境变量：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###zlib</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"zlib-1.2.11"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###curl</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"curl-7.28.0"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/bin:<span class="variable">$&#123;PATH&#125;</span>"</span>   </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###bzip</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"bzip2-1.0.6"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###pcre</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"pcre-8.42"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###xz</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"xz-5.2.3"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Java_JRE</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"jdk1.8.0_161"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=<span class="string">"/export/app/jdk1.8.0_161"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=<span class="string">"<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib/"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:$&#123;PATH&#125;</span><br></pre></td></tr></table></figure></p><p>然后<strong>重新登录一个bash</strong>，开始下一步安装<code>R</code>.</p><h1 id="3-安装R主体"><a href="#3-安装R主体" class="headerlink" title="3.安装R主体"></a>3.安装R主体</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/export/app/src/R-3.4.4/configure</span> <span class="params">--prefix=/export/app/R-3</span>.4.4 <span class="params">--enable-R-shlib</span> <span class="params">--with-cairo</span>  <span class="params">--with-jpeglib</span> <span class="params">--with-readline</span> <span class="params">--with-tcltk</span>  <span class="params">--with-blas</span> <span class="params">--with-lapack</span> <span class="params">--enable-R-profiling</span> <span class="params">--with-x=no</span> LDFLAGS=<span class="string">"-L/export/app/bzip2-1.0.6/lib"</span> CPPFLAGS=<span class="string">"-I/export/app/bzip2-1.0.6/include"</span></span><br></pre></td></tr></table></figure><p>其中<code>LDFLAGS</code>和<code>CPPFLAGS</code>后面的路径要置换成你的<code>bzip</code>包的安装路径。本来我们在第二部分里配置了这个库的环境变量的，但是不知道为什么这个不行。<br>然后<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span></span><br><span class="line"><span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></p><p>这样就安装完成了，然后就可以将<code>R</code>加入环境变量<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## R</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"R-3.4.4"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">R_LIBS</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/library"</span></span><br></pre></td></tr></table></figure></p><p>这样只要运行<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">R</span></span><br></pre></td></tr></table></figure></p><p>就会显示<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ R</span><br><span class="line"></span><br><span class="line">R version <span class="number">3.4</span>.<span class="number">4</span> (<span class="number">2018</span>-<span class="number">03</span>-<span class="number">15</span>) <span class="comment">-- "Someone to Lean On"</span></span><br><span class="line">Copyright (C) <span class="number">2018</span> The R Foundation <span class="keyword">for</span> Statistical Computing</span><br><span class="line">Platform: x86_64-pc-linux-gnu (<span class="number">64</span>-<span class="built_in">bit</span>)</span><br><span class="line"></span><br><span class="line">R <span class="keyword">is</span> free software <span class="keyword">and</span> comes <span class="keyword">with</span> ABSOLUTELY NO WARRANTY.</span><br><span class="line">You are welcome <span class="keyword">to</span> redistribute it under certain conditions.</span><br><span class="line"><span class="keyword">Type</span> <span class="symbol">'license</span>()' <span class="keyword">or</span> <span class="symbol">'licence</span>()' <span class="keyword">for</span> distribution details.</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Natural</span> language support but running <span class="keyword">in</span> an English locale</span><br><span class="line"></span><br><span class="line">R <span class="keyword">is</span> a collaborative project <span class="keyword">with</span> many contributors.</span><br><span class="line"><span class="keyword">Type</span> <span class="symbol">'contributors</span>()' <span class="keyword">for</span> more information <span class="keyword">and</span></span><br><span class="line"><span class="symbol">'citation</span>()' <span class="keyword">on</span> how <span class="keyword">to</span> cite R <span class="keyword">or</span> R packages <span class="keyword">in</span> publications.</span><br><span class="line"></span><br><span class="line"><span class="keyword">Type</span> <span class="symbol">'demo</span>()' <span class="keyword">for</span> some demos, <span class="symbol">'help</span>()' <span class="keyword">for</span> <span class="keyword">on</span>-<span class="literal">line</span> help, <span class="keyword">or</span></span><br><span class="line"><span class="symbol">'help</span>.start()' <span class="keyword">for</span> an HTML browser interface <span class="keyword">to</span> help.</span><br><span class="line"><span class="keyword">Type</span> <span class="symbol">'q</span>()' <span class="keyword">to</span> quit R.</span><br><span class="line"></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p><h1 id="4-可能的报错以及解决方法"><a href="#4-可能的报错以及解决方法" class="headerlink" title="4.可能的报错以及解决方法"></a>4.可能的报错以及解决方法</h1><p>4.1<code>libcurl</code>的环境变量配置问题<br>报错：<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configure: <span class="literal">error</span>: libcurl &gt;= <span class="number">7.22</span>.<span class="number">0</span> <span class="keyword">library</span> <span class="keyword">and</span> headers are required <span class="keyword">with</span> support <span class="keyword">for</span> https</span><br></pre></td></tr></table></figure></p><p>在这里面有一个坑就是<code>libcurl</code>在配置环境变量时一定要将<code>bin</code>的路径也加入至环境变量，不然就会报错,而其他库则没有此要求。可以回头再看下3。<br>解决方法：将<code>export PATH=&quot;/export/app/${ver}/bin:${PATH}&quot;</code>加入环境变量，如下所示。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###curl</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ver</span>=<span class="string">"curl-7.28.0"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">C_INCLUDE_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/include:<span class="variable">$&#123;C_INCLUDE_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/lib:<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="string">"/export/app/<span class="variable">$&#123;ver&#125;</span>/bin:<span class="variable">$&#123;PATH&#125;</span>"</span>    ####就是它</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LIBRARY_PATH</span>=<span class="string">"<span class="variable">$&#123;LD_LIBRARY_PATH&#125;</span>"</span></span><br></pre></td></tr></table></figure></p><p>4.2<code>jdk</code>版本不对<br>报错：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="class"><span class="keyword">lib</span>/<span class="title">ld</span>-<span class="title">linux</span>.<span class="title">so</span>.2: <span class="title">bad</span> <span class="title">ELF</span> <span class="title">interpreter</span>: <span class="title">No</span> <span class="title">such</span> <span class="title">file</span> <span class="title">or</span> <span class="title">directory</span></span></span><br></pre></td></tr></table></figure></p><p>或<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">conftest.c:<span class="number">1</span>:<span class="number">17</span>: fatal <span class="built_in">error</span>: jni.h: No such file <span class="keyword">or</span> directory</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &lt;jni.h&gt;</span></span><br><span class="line">                ^</span><br><span class="line">compilation terminated.</span><br><span class="line"><span class="built_in">make</span>[<span class="number">2</span>]: *** [conftest.o] <span class="built_in">Error</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">make</span>[<span class="number">2</span>]: Leaving directory `/tmp/Rjavareconf.xQ4EzH'</span><br><span class="line">Unable to <span class="keyword">compile</span> a JNI program</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">JAVA_HOME        : /usr/<span class="keyword">lib</span>/jvm/java<span class="number">-1.7</span><span class="number">.0</span>-openjdk<span class="number">-1.7</span><span class="number">.0</span><span class="number">.151</span>.x86_64/jre</span><br><span class="line">Java <span class="keyword">library</span> path:</span><br><span class="line">JNI cpp flags    :</span><br><span class="line">JNI linker flags :</span><br><span class="line">Updating Java configuration in /export/app/R<span class="number">-3.4</span><span class="number">.4</span></span><br><span class="line">Done.</span><br><span class="line"></span><br><span class="line"><span class="built_in">make</span>[<span class="number">1</span>]: Leaving directory `/export/app/R<span class="number">-3.4</span><span class="number">.4</span>'</span><br></pre></td></tr></table></figure></p><p>可能是64位系统装了32位的<code>jdk或者</code>jdk<code>版本不对，去官网重新下载适合自己的版本的</code>jdk`。<br>如果不知道你机器的版本，用下面这两个命令：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname -a              <span class="comment"># 查看内核/操作系统/CPU信息</span></span><br><span class="line">head -n <span class="number">1</span> <span class="regexp">/etc/i</span>ssue  <span class="comment"># 查看操作系统版本</span></span><br></pre></td></tr></table></figure></p><p>比如我的结果是<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2<span class="selector-class">.6</span><span class="selector-class">.32-696</span><span class="selector-class">.13</span><span class="selector-class">.2</span><span class="selector-class">.el6</span><span class="selector-class">.x86_64</span></span><br></pre></td></tr></table></figure></p><p>说明我应该下载<code>64</code>位的<code>jdk</code>。<br>4.3安装<code>xlsx</code>等R包调用<code>java</code>时报错<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">checking whether setjmp.h <span class="keyword">is</span> POSIX<span class="number">.1</span> compatible... yes</span><br><span class="line">checking whether sigsetjmp <span class="keyword">is</span> declared... yes</span><br><span class="line">checking whether siglongjmp <span class="keyword">is</span> declared... yes</span><br><span class="line">checking Java support <span class="keyword">in</span> R... present:</span><br><span class="line">interpreter : <span class="comment">'/usr/bin/java'</span></span><br><span class="line">archiver    : <span class="comment">''</span></span><br><span class="line">compiler    : <span class="comment">''</span></span><br><span class="line">header prep.: <span class="comment">''</span></span><br><span class="line">cpp flags  : <span class="comment">''</span></span><br><span class="line">java libs  : <span class="comment">''</span></span><br><span class="line">configure: <span class="keyword">error</span>: Java Development Kit (JDK) <span class="keyword">is</span> missing <span class="keyword">or</span> <span class="keyword">not</span> registered <span class="keyword">in</span> R</span><br><span class="line">Make sure R <span class="keyword">is</span> configured <span class="keyword">with</span> full Java support (including JDK). Run</span><br><span class="line">R CMD javareconf</span><br><span class="line"><span class="keyword">as</span> root <span class="keyword">to</span> add Java support <span class="keyword">to</span> R.</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> you don<span class="comment">'t have root privileges, run</span></span><br><span class="line">R CMD javareconf -e</span><br><span class="line"><span class="keyword">to</span> <span class="keyword">set</span> all Java-related variables <span class="keyword">and</span> <span class="keyword">then</span> install rJava.</span><br><span class="line"></span><br><span class="line"><span class="keyword">ERROR</span>: configuration failed <span class="keyword">for</span> package ‘rJava’</span><br><span class="line">* removing ‘/export/app/R<span class="number">-3.4</span><span class="number">.4</span>/library/rJava’</span><br><span class="line"><span class="keyword">ERROR</span>: dependency ‘rJava’ <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">for</span> package ‘xlsxjars’</span><br><span class="line">* removing ‘/export/app/R<span class="number">-3.4</span><span class="number">.4</span>/library/xlsxjars’</span><br><span class="line"><span class="keyword">ERROR</span>: dependencies ‘rJava’, ‘xlsxjars’ are <span class="keyword">not</span> available <span class="keyword">for</span> package ‘xlsx’</span><br><span class="line">* removing ‘/export/app/R<span class="number">-3.4</span><span class="number">.4</span>/library/xlsx’</span><br></pre></td></tr></table></figure></p><p>解决方案：同4.2点。</p><hr><p>最后：如果你遇到了其他问题，欢迎你在评论里留下你的问题和报错代码，方便我完善这个文章，谢谢！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;去年10月份曾经写过一个比较曲折的R安装教程，里面给自己加了很多戏，本以为有那篇教程在前，这下在阿里云上部署R会是一马平川，没想到还是踩了几个之前没踩过的坑，于是将这次的教训跟之前的教程整理一下，写一个比较干净的教程。如果你们想体会下之前我安装R的内心戏，可以看下这篇文章&lt;a href=&quot;/2018-04-02-R安装.html&quot; title=&quot;Linux下安装R(心路历程版)&quot;&gt;Linux下安装R(心路历程版)&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生信/软件" scheme="https://xieduo7.github.io/categories/%E7%94%9F%E4%BF%A1-%E8%BD%AF%E4%BB%B6/"/>
    
    
      <category term="技术" scheme="https://xieduo7.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="R" scheme="https://xieduo7.github.io/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>ggplot箱线图之如何添加最大值最小值线(whisker-ends)</title>
    <link href="https://xieduo7.github.io/2018-04-02-ggplot%E7%AE%B1%E7%BA%BF%E5%9B%BE%E4%B9%8B%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E6%9C%80%E5%A4%A7%E5%80%BC%E6%9C%80%E5%B0%8F%E5%80%BC%E7%BA%BF(whisker-ends).html"/>
    <id>https://xieduo7.github.io/2018-04-02-ggplot箱线图之如何添加最大值最小值线(whisker-ends).html</id>
    <published>2018-04-02T15:55:30.000Z</published>
    <updated>2018-04-02T15:56:32.141Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>ggplot</code>作为R语言画图的瑞士军刀，相比于基础的R包，语法更加易于理解和掌握，不需要掌握很多的命令就能画出整洁美观的图表。比方说用<code>ggplot</code>来画箱线图，首先我们可以这样操作：</p><a id="more"></a><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">library(<span class="name">ggplot2</span>)</span><br><span class="line">library(<span class="name">RColorBrewer</span>)</span><br><span class="line">p &lt;- ggplot(<span class="name">mpg</span>, aes(<span class="name">class</span>, hwy))</span><br><span class="line">p + geom_boxplot(<span class="name">aes</span>(<span class="name">colour=class</span>),width=0.<span class="number">5</span>)+</span><br><span class="line">  theme(<span class="name">panel</span>.background = element_blank(),axis.ticks=element_blank(),legend.position=<span class="string">"none"</span>,axis.line = element_line(<span class="name">colour=</span><span class="string">"black"</span>,arrow=arrow(<span class="name">length</span> = unit(<span class="number">0.20</span>, <span class="string">"npc"</span>))))</span><br></pre></td></tr></table></figure><p>得到下图<br><img src="http://upload-images.jianshu.io/upload_images/166439-901d0d1857bd5dc5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ggplot的箱线图"><br>但是在基础R包绘制的箱线图和大部分的箱线图中是这样的<br><img src="http://upload-images.jianshu.io/upload_images/166439-fa581c058200cfa6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="基础R包的箱线图"><br>相比较于基础R包的箱线图，<code>ggplot</code>的箱线图缺少了最大值和最小值的两条须线（whisker-ends），于是我谷歌后找到了一个<a href="https://stackoverflow.com/questions/12993545/how-to-put-whisker-ends-on-ggplot2-boxplot" target="_blank" rel="noopener">网页</a>,参照网页中的操作，我在我的代码中加入了<code>stat_boxplot</code>,变成<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">library(<span class="name">ggplot2</span>)</span><br><span class="line">library(<span class="name">RColorBrewer</span>)</span><br><span class="line">p &lt;- ggplot(<span class="name">mpg</span>, aes(<span class="name">class</span>, hwy))</span><br><span class="line">p + geom_boxplot(<span class="name">aes</span>(<span class="name">colour=class</span>),width=0.<span class="number">5</span>)+</span><br><span class="line">  stat_boxplot(<span class="name">geom</span> = <span class="string">"errorbar"</span>,width=0.<span class="number">15</span>,aes(<span class="name">color=class</span>))+</span><br><span class="line">  theme(<span class="name">panel</span>.background = element_blank(),axis.ticks=element_blank(),legend.position=<span class="string">"none"</span>,axis.line = element_line(<span class="name">colour=</span><span class="string">"black"</span>,arrow=arrow(<span class="name">length</span> = unit(<span class="number">0.20</span>, <span class="string">"npc"</span>))))</span><br></pre></td></tr></table></figure></p><p><img src="http://upload-images.jianshu.io/upload_images/166439-6994ae7c13f9c28e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="加上须线后的box图"><br>但是这样有一个问题，加上去的须线会挡住我们的box，显得图很乱，后来比照了前面的<a href="https://stackoverflow.com/questions/12993545/how-to-put-whisker-ends-on-ggplot2-boxplot" target="_blank" rel="noopener">网页</a>和我的代码，发现他的<code>stat_boxplot</code>在<code>geom_boxplot</code>前面，后来我想，之所以我的图会变成这样是因为<code>ggplot</code>是以图层的方式进行绘图，即后一个图层会覆盖前一个图层，因此我的代买里面先<code>geom_boxplot</code>后<code>stat_boxplot</code>导致前面的box被后面的线覆盖掉，如果不想出现这种情况，那就只需要将这两个命令调整一下顺序,修改代码如下：<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">library(<span class="name">ggplot2</span>)</span><br><span class="line">library(<span class="name">RColorBrewer</span>)</span><br><span class="line">p &lt;- ggplot(<span class="name">mpg</span>, aes(<span class="name">class</span>, hwy))</span><br><span class="line">p + stat_boxplot(<span class="name">geom</span> = <span class="string">"errorbar"</span>,width=0.<span class="number">15</span>,aes(<span class="name">color=class</span>))+</span><br><span class="line">  geom_boxplot(<span class="name">aes</span>(<span class="name">colour=class</span>),width=0.<span class="number">5</span>)+</span><br><span class="line">  theme(<span class="name">panel</span>.background = element_blank(),axis.ticks=element_blank(),legend.position=<span class="string">"none"</span>,axis.line = element_line(<span class="name">colour=</span><span class="string">"black"</span>,arrow=arrow(<span class="name">length</span> = unit(<span class="number">0.20</span>, <span class="string">"npc"</span>))))</span><br></pre></td></tr></table></figure></p><p><img src="http://upload-images.jianshu.io/upload_images/166439-e9f8c9a060ab9a3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="最终修改完的"></p><p>最终总结：记住<code>ggplot</code>是基于图层的绘图系统。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;ggplot&lt;/code&gt;作为R语言画图的瑞士军刀，相比于基础的R包，语法更加易于理解和掌握，不需要掌握很多的命令就能画出整洁美观的图表。比方说用&lt;code&gt;ggplot&lt;/code&gt;来画箱线图，首先我们可以这样操作：&lt;/p&gt;
    
    </summary>
    
      <category term="生信/软件" scheme="https://xieduo7.github.io/categories/%E7%94%9F%E4%BF%A1-%E8%BD%AF%E4%BB%B6/"/>
    
    
      <category term="技术" scheme="https://xieduo7.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="R" scheme="https://xieduo7.github.io/tags/R/"/>
    
      <category term="画图" scheme="https://xieduo7.github.io/tags/%E7%94%BB%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Linux下安装R(心路历程版)</title>
    <link href="https://xieduo7.github.io/2018-04-02-R%E5%AE%89%E8%A3%85.html"/>
    <id>https://xieduo7.github.io/2018-04-02-R安装.html</id>
    <published>2018-04-02T15:12:30.000Z</published>
    <updated>2018-04-09T14:15:22.258Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>不像在windows上面下载安装包进行安装那么简单，你只要选择好安装目录，然后一直<code>next</code>就行。<br>要在<code>Linux</code>下通过源码安装R包是一件非常耗时耗力的事情。由于个人工作性质的原因，需要常常使用大型机进行作业，但是大型机基本都是<code>Linux</code>系统，由于需要使用<code>R</code>,并且经常会做一些个性化分析，需要自己安装相应的R包，但是由于自己没有root权限，在安装软件时难免会收到这样那样的掣肘。我第一次安装R以失败告终，因为安装R时会告诉你需要A库，然后你去安装A库，但是当你去安装A库的时候又会告诉你需要安装B库，如此循环往复，最后终于心撕力竭，手头又有其他事情要忙，终于铩羽而归。但是有一天遇到王道明，他正好也有过如此安装R的经历，最后捯饬了半天终于成功，最后还把这个经历总结下来，我当时内心狂喜，仿佛得到了武功秘籍。想着终于可以痛快地安装R了，但是事实证明我还是<code>Too young Too simple</code>,最后还是经历了之前没有预想到的大坑，凭借着王道明的安装指南和R官方文档，才终于功德圆满，取经归来。</p><a id="more"></a><h1 id="第一难：R依赖库的安装"><a href="#第一难：R依赖库的安装" class="headerlink" title="第一难：R依赖库的安装"></a>第一难：R依赖库的安装</h1><p>在安装R之前首先要安装R依赖的包，如何知道R安装需要什么包呢？可以去看R的官方文档<a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Essential-and-useful-other-programs-under-a-Unix_002dalike" target="_blank" rel="noopener">R Installation and Administration </a>,我们主要要安装的依赖包是zlib，bzip，liblzma(这个包如果直接搜索liblzma出来的会是XZ，没错，需要安装的就是XZ)以及PCRE。不过首先需要注意的是，我安装的R版本是R-3.4.2 <code>Short Summer，2017-09-28发行</code>，而依照的官方文档也是Version 3.4.2 <code>2017-09-28</code>，因此其他版本的不一定完全适用，但是一般来说R所依赖的包大致都是这些，可能有版本的区别，安装R的大致顺序也差不多。其次，在安装这些库时最好遵照我下面给出的顺序来依次进行。否则就会报错。</p><h2 id="1-安装zlib1-2-5版本及以上"><a href="#1-安装zlib1-2-5版本及以上" class="headerlink" title="1.安装zlib1.2.5版本及以上"></a>1.安装zlib<code>1.2.5版本及以上</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> zlib-1.2.11</span><br><span class="line"><span class="string">./configure</span> <span class="params">--prefix</span> =<span class="string">/bulider/software/zlib</span></span><br><span class="line">make  </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="2-安装bzip"><a href="#2-安装bzip" class="headerlink" title="2.安装bzip"></a>2.安装bzip</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> bzip2-<span class="number">1.0</span>.<span class="number">6</span></span><br><span class="line"><span class="keyword">make</span> -<span class="keyword">f</span> Makefile-libbz2_so</span><br><span class="line">修改Makefile 中的PREFIX=/bulider/software/bzip2</span><br><span class="line"><span class="keyword">make</span> &amp;&amp; <span class="keyword">make</span> install</span><br></pre></td></tr></table></figure><h2 id="3-安装liblzma5-0-3版本及以上"><a href="#3-安装liblzma5-0-3版本及以上" class="headerlink" title="3.安装liblzma5.0.3版本及以上"></a>3.安装liblzma<code>5.0.3版本及以上</code></h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> xz-5.2.3</span><br><span class="line"><span class="string">./configure</span> -prefix=<span class="string">/bulider/software/xz</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="4-安装pcre"><a href="#4-安装pcre" class="headerlink" title="4.安装pcre"></a>4.安装pcre</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf pcre-8.41.tar.gz</span><br><span class="line"><span class="keyword">cd</span> pcre-8.41</span><br><span class="line"><span class="string">./configure</span> <span class="params">--enable-utf</span> <span class="params">--enable-unicode-properties</span> <span class="params">--enable-jit</span> <span class="params">--disable-cpp</span> <span class="params">--prefix</span> <span class="string">/bulider/software/pcre</span><span class="comment">##这个包的安装参数是有要求的，因此用的是官方文档的推荐命令</span></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="5-安装libcurl7-22-0及以上，但是不要超过版本8"><a href="#5-安装libcurl7-22-0及以上，但是不要超过版本8" class="headerlink" title="5.安装libcurl7.22.0及以上，但是不要超过版本8"></a>5.安装libcurl<code>7.22.0及以上，但是不要超过版本8</code></h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -zxf curl<span class="number">-7.28</span><span class="number">.0</span>.tar.gz</span><br><span class="line">cd curl<span class="number">-7.28</span><span class="number">.0</span></span><br><span class="line">./configure --prefix=/bulider/software/curl</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h1 id="第二难：安装R"><a href="#第二难：安装R" class="headerlink" title="第二难：安装R"></a>第二难：安装R</h1><p>安装了一打R的依赖包以后，你以为就能修成正果，急流勇退了吗？如果你有这个想法我想说你还是<strong>图样图森破！上台拿衣服！</strong><br>1.进行<code>configure</code><br><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/<span class="string">source/</span><span class="string">R-3.</span>4.2/<span class="string">configure </span><span class="built_in">--prefix=/builder/software/R</span> <span class="built_in">--en</span></span><br><span class="line"><span class="built_in">able-R-shlib</span> <span class="built_in">--with-cairo</span>  <span class="built_in">--with-jpeglib</span> <span class="built_in">--with-readline</span> <span class="built_in">--with-tcltk</span>  <span class="built_in">--with-blas</span> <span class="built_in">--with-lapack</span> <span class="built_in">--enable-R-profiling</span> <span class="string">LDFLAGS=</span><span class="string">"-L/builder/software/zlib/lib  -L/builder/software/bzip2/lib -L/builder/software/xz/lib -L/builder/software/pcre/lib -L/builder/so</span></span><br><span class="line"><span class="string">ftware/curl/lib"</span> <span class="string">CPPFLAGS=</span><span class="string">"-I/builder/zlib/include -I/builder/softw</span></span><br><span class="line"><span class="string">are/bzip2/include -I/builder/software/xz/include -I/builder/software/pcre/in</span></span><br><span class="line"><span class="string">clude -I/builder/software/curl/include"</span><span class="comment">##第一步检查环境配置，生成Makefile</span></span><br></pre></td></tr></table></figure></p><p>首先注意一点，如果你要把R安装到另一个文件夹里而不是源码所在的文件夹里，那么你首先要创建一个文件夹，然后在这个文件夹里对R进行编译，在<code>configure</code>时要加上全路径<code>/source/R-3.4.2/configure</code>，同时在后面加上<code>--prefix=</code>参数，比方我要安装到<code>/builder/software/R</code>,那么就需要加入<code>--prefix=/builder/software/R</code>这个参数，而我的源码在<code>/source/R-3.4.2</code>这个文件夹里。<br>其次由于R是用C语言写的，因此要从源码编译R需要把R的源码需要通过<code>gcc</code>将源码编译为可执行文件。在前面我们安装了一些R的依赖库，这些依赖库是在编译R的时候要用到的，如果在一般情况下这些依赖库都会放到系统指定的位置来进行使用，但是由于我没有root权限，因此无法将这些库文件放到系统指定的库路径或者修改相应的配置文件，只能把这些库的路径通过<code>LDFLAGS</code>和<code>CPPFLAGS</code>这两个参数来传递给<code>gcc</code>，关于这两个参数可以<a href="http://www.cnblogs.com/taskiller/archive/2012/12/14/2817650.html" target="_blank" rel="noopener">参考</a>。告诉<code>gcc</code>这些路径里有相应的库。其中<code>LDFLAGS</code>传递的是给链接器的参数，<code>CPPFLAGS</code>传递的是相应的头文件。这两个参数都是<code>configure</code>的参数。<br>2.通过上一步生成了<code>Makefile</code>后，觉得胜利已经在前方向你招手，于是你进行了<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make</span></span><br></pre></td></tr></table></figure></p><p><strong>但是出现了报错！</strong><br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/<span class="symbol">ld:</span> <span class="symbol">warning:</span> libpcre.so.<span class="number">1</span>, needed by ../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>, <span class="title">not</span> <span class="title">found</span> (<span class="title">try</span> <span class="title">using</span> -<span class="title">rpath</span> <span class="title">or</span> -<span class="title">rpath</span>-<span class="title">link</span>)</span></span><br><span class="line">/usr/bin/<span class="symbol">ld:</span> <span class="symbol">warning:</span> liblzma.so.<span class="number">5</span>, needed by ../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>, <span class="title">not</span> <span class="title">found</span> (<span class="title">try</span> <span class="title">using</span> -<span class="title">rpath</span> <span class="title">or</span> -<span class="title">rpath</span>-<span class="title">link</span>)</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_fullinfo</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_lzma_preset</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_alone_decoder</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_crc64</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_raw_encoder</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_config</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_code</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_stream_decoder</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_free</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_raw_decoder</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_free_study</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_assign_jit_stack</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_exec</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_version_string</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_maketables</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_stream_encoder</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_compile</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_study</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_version</span>'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">lzma_end</span>@<span class="title">XZ_5</span>.0'</span></span><br><span class="line">../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>: <span class="title">undefined</span> <span class="title">reference</span> <span class="title">to</span> `<span class="title">pcre_jit_stack_alloc</span>'</span></span><br><span class="line"><span class="symbol">collect2:</span> <span class="symbol">error:</span> ld returned <span class="number">1</span> exit status</span><br><span class="line">make[<span class="number">3</span>]: *** [R.bin] Error <span class="number">1</span></span><br><span class="line">make[<span class="number">3</span>]: Leaving directory <span class="string">`/builder/software/R/src/main'</span></span><br><span class="line"><span class="string">make[2]: *** [R] Error 2</span></span><br><span class="line"><span class="string">make[2]: Leaving directory `</span>/builder/software/R/src/main<span class="string">'</span></span><br><span class="line"><span class="string">make[1]: *** [R] Error 1</span></span><br><span class="line"><span class="string">make[1]: Leaving directory `/builder/software/R/src'</span></span><br><span class="line"><span class="symbol">make:</span> *** [R] Error <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>这个报错是因为什么原因导致的？我们可以看到里面说<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/<span class="symbol">ld:</span> <span class="symbol">warning:</span> libpcre.so.<span class="number">1</span>, needed by ../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>, <span class="title">not</span> <span class="title">found</span> (<span class="title">try</span> <span class="title">using</span> -<span class="title">rpath</span> <span class="title">or</span> -<span class="title">rpath</span>-<span class="title">link</span>)</span></span><br><span class="line">/usr/bin/<span class="symbol">ld:</span> <span class="symbol">warning:</span> liblzma.so.<span class="number">5</span>, needed by ../../<span class="class"><span class="keyword">lib</span>/<span class="title">libR</span>.<span class="title">so</span>, <span class="title">not</span> <span class="title">found</span> (<span class="title">try</span> <span class="title">using</span> -<span class="title">rpath</span> <span class="title">or</span> -<span class="title">rpath</span>-<span class="title">link</span>)</span></span><br></pre></td></tr></table></figure></p><p>说缺少<code>libpcre.so.1</code>和<code>liblzma.so.5</code>这两个库文件，<code>我心里浮现了一副黑人问号脸</code>我在前面<code>./configure</code>的时候还传入了<code>PCRE</code>和<code>XZ</code>这两个库的路径，<strong>为什么还是会报错？</strong><br>于是我先是进行了谷歌，从谷歌上找到了一篇<a href="http://kuxingseng2016.blog.51cto.com/1374617/1846326" target="_blank" rel="noopener">R安装攻略</a>,在这篇攻略里也提到了这个问题，</p><blockquote><p>此处报错是由于没有找到动态库，看第一二行<br>解决方法：添加动态库<br>cat /etc/ld.so.conf<br>include ld.so.conf.d/*.conf<br>/opt/pcre-8.39/lib<br>/opt/xz-5.2.2/lib</p></blockquote><p>但是在这个攻略里最后的解决方法是修改<code>/etc/ld.so.conf</code>文件，将前面安装的库的路径添加到这个文件中，但是我没有root权限，并不能修改这个文件，因此这个方法对我并不适用。后来在鹏帆和许骄的提醒下，我们在后面看到建议说<code>try using -rpath or -rpath-link</code>,后来我<a href="http://www.cnblogs.com/bourneli/archive/2012/04/27/2474103.html" target="_blank" rel="noopener">搜索</a>了这两个命令，这两个命令是用于通过<code>gcc</code>向<code>ld</code>传递参数的时候用的，</p><blockquote><p>gcc编译链接动态库时，很有可能编译通过，但是执行时，找不到动态链接库，那是因为-L选项指定的路径只在编译时有效，解决方法是通过-Wl(注意，是字母表K之后的小写L),rpath=&lt;your_lib_dir&gt;，使得execute记住链接库的位置</p></blockquote><p>于是我试着在<code>configure</code>的时候加入这两个参数<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/builder/software/R</span><span class="literal">-</span><span class="comment">3</span><span class="string">.</span><span class="comment">4</span><span class="string">.</span><span class="comment">2/configure</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">prefix=/builder/software/R</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">en</span></span><br><span class="line"><span class="comment">able</span><span class="literal">-</span><span class="comment">R</span><span class="literal">-</span><span class="comment">shlib</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">cairo</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">jpeglib</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">readline</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">tcltk</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">blas</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">lapack</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">enable</span><span class="literal">-</span><span class="comment">R</span><span class="literal">-</span><span class="comment">profiling</span> <span class="comment">LDFLAGS="</span><span class="literal">-</span><span class="comment">L/builder/software/zlib/lib</span>  <span class="literal">-</span><span class="comment">L/builder/software/bzip2/lib</span> <span class="literal">-</span><span class="comment">L/builder/software/xz/lib</span>  <span class="literal">-</span><span class="comment">Wl</span><span class="string">,</span><span class="literal">-</span><span class="literal">-</span><span class="comment">rpath/builder/software/pcre/lib</span> <span class="literal">-</span><span class="comment">Wl</span><span class="string">,</span><span class="literal">-</span><span class="literal">-</span><span class="comment">rpath/builder/so</span></span><br><span class="line"><span class="comment">ftware/curl/lib"</span> <span class="comment">CPPFLAGS="</span><span class="literal">-</span><span class="comment">I/builder/software/zlib/include</span> <span class="literal">-</span><span class="comment">I/builder/softw</span></span><br><span class="line"><span class="comment">are/bzip2/include</span> <span class="literal">-</span><span class="comment">I/builder/software/xz/include</span> <span class="literal">-</span><span class="comment">I/builder/software/pcre/in</span></span><br><span class="line"><span class="comment">clude</span> <span class="literal">-</span><span class="comment">I/builder/software/curl/include</span></span><br></pre></td></tr></table></figure></p><p>但是这样总会报错，后来我知道，<code>configure</code>的时候我们传入的参数都会写到<code>Makeconf</code>文件里面，那么我可不可以先按照原来的我方法先进行<code>configure</code>，然后再对<code>Makeconf</code>文件进行修改呢？于是我还是先按照之前的方法进行<code>configure</code><br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/builder/software/R</span><span class="literal">-</span><span class="comment">3</span><span class="string">.</span><span class="comment">4</span><span class="string">.</span><span class="comment">2/configure</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">prefix=/builder/software/R</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">en</span></span><br><span class="line"><span class="comment">able</span><span class="literal">-</span><span class="comment">R</span><span class="literal">-</span><span class="comment">shlib</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">cairo</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">jpeglib</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">readline</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">tcltk</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">blas</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">lapack</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">enable</span><span class="literal">-</span><span class="comment">R</span><span class="literal">-</span><span class="comment">profiling</span> <span class="comment">LDFLAGS="</span><span class="literal">-</span><span class="comment">L/builder/software/zlib/lib</span>  <span class="literal">-</span><span class="comment">L/builder/software/bzip2/lib</span> <span class="literal">-</span><span class="comment">L/builder/software/xz/lib</span> <span class="literal">-</span><span class="comment">L/builder/software/pcre/lib</span> <span class="literal">-</span><span class="comment">L/builder/so</span></span><br><span class="line"><span class="comment">ftware/curl/lib"</span> <span class="comment">CPPFLAGS="</span><span class="literal">-</span><span class="comment">I/builder/software/zlib/include</span> <span class="literal">-</span><span class="comment">I/builder/softw</span></span><br><span class="line"><span class="comment">are/bzip2/include</span> <span class="literal">-</span><span class="comment">I/builder/software/xz/include</span> <span class="literal">-</span><span class="comment">I/builder/software/pcre/in</span></span><br><span class="line"><span class="comment">clude</span> <span class="literal">-</span><span class="comment">I/builder/software/curl/include</span></span><br></pre></td></tr></table></figure></p><p>然后在<code>make</code>之前修改<code>Makeconf</code>中的参数<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDFLAGS = -L<span class="regexp">/builder/</span>software<span class="regexp">/zlib/</span>lib  -L<span class="regexp">/builder/</span>software<span class="regexp">/bzip2/</span>lib   -L<span class="regexp">/builder/</span>software<span class="regexp">/curl/</span>lib -Wl,-rpath=<span class="regexp">/builder/</span>software<span class="regexp">/xz/</span>lib -Wl,-rpath=<span class="regexp">/builder/</span>software<span class="regexp">/pcre/</span>lib</span><br></pre></td></tr></table></figure></p><p>再进行<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make</span></span><br></pre></td></tr></table></figure></p><p><strong>之前的报错终于不见了!</strong>但是出现了新的报错<code>心里有句mmp</code>:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ld: cannot <span class="builtin-name">find</span> -lpcre</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br><span class="line">make[3]: *** [libR.so] <span class="builtin-name">Error</span> 1</span><br><span class="line">make[3]: Leaving directory `/builder/software/R-3.4.2/src/main'</span><br><span class="line">make[2]: *** [R] <span class="builtin-name">Error</span> 2</span><br><span class="line">make[2]: Leaving directory `/builder/software/R-3.4.2/src/main'</span><br><span class="line">make[1]: *** [R] <span class="builtin-name">Error</span> 1</span><br><span class="line">make[1]: Leaving directory `/builder/software/R-3.4.2/src'</span><br><span class="line">make: *** [R] <span class="builtin-name">Error</span> 1</span><br></pre></td></tr></table></figure></p><p>于是我在想，可能是前面我把<code>LDFLAGS</code>里面参数由<code>-L/builder/software/pcre/lib</code>修改为了<code>-Wl,-rpath=/builder/software/pcre/lib</code>之后不再出现原来的报错，但是现在又出现了新的报错，而我在使用原来的参数时不会出现这个新的报错，结合之前我搜索到的<a href="http://www.cnblogs.com/bourneli/archive/2012/04/27/2474103.html" target="_blank" rel="noopener">结果</a>,是不是因为我之前的写法只能让路径<code>gcc</code>在编译时有效,而后来的写法只能让其在进行运行时有效？那么如果我让两种参数同时出现，虽然我把库的路径传递了两次，但是会不会就不再报错了？<strong>时间是检验真理的唯一标准！先试验一把！</strong>于是我把两种参数的路径都加到了<code>Makeconf</code>中<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDFLAGS = -L<span class="regexp">/builder/</span>software<span class="regexp">/zlib/</span>lib  -L<span class="regexp">/builder/</span>software<span class="regexp">/bzip2/</span>lib -L<span class="regexp">/builder/</span>software<span class="regexp">/xz/</span>lib -L<span class="regexp">/builder/</span>software<span class="regexp">/pcre/</span>lib -L<span class="regexp">/builder/</span>software<span class="regexp">/curl/</span>lib -Wl,-rpath=<span class="regexp">/builder/</span>software<span class="regexp">/xz/</span>lib -Wl,-rpath=<span class="regexp">/builder/</span>software<span class="regexp">/pcre/</span>lib</span><br></pre></td></tr></table></figure></p><p>再次进行<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make</span></span><br></pre></td></tr></table></figure></p><p>终于没有了报错。说明<code>make</code>成功了，于是我再进行<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="keyword">install</span></span><br></pre></td></tr></table></figure></p><p>终于安装完成！<code>你挑着担我牵着马</code></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol><li>在Linux下用源码安装R是个大坑<code>尤其是在没有root权限的情况下</code></li><li>安装R之前一定要将R要求的依赖库预先安装好，版本和安装顺序都要对。具体可以参考R官方文档<a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Essential-and-useful-other-programs-under-a-Unix_002dalike" target="_blank" rel="noopener">R Installation and Administration </a>。</li><li>在安装好R的依赖库之后，在进行R的安装的时候要注意将依赖库的路径传入到参数中，而且一定要注意传入的方式。</li><li>注意分析报错信息，从中寻找原因，不要盲目瞎想，多谷歌，多问老司机。</li><li>关于<code>-Wl -rpath</code>更详细的介绍<a href="https://my.oschina.net/shelllife/blog/115958" target="_blank" rel="noopener">参考</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不像在windows上面下载安装包进行安装那么简单，你只要选择好安装目录，然后一直&lt;code&gt;next&lt;/code&gt;就行。&lt;br&gt;要在&lt;code&gt;Linux&lt;/code&gt;下通过源码安装R包是一件非常耗时耗力的事情。由于个人工作性质的原因，需要常常使用大型机进行作业，但是大型机基本都是&lt;code&gt;Linux&lt;/code&gt;系统，由于需要使用&lt;code&gt;R&lt;/code&gt;,并且经常会做一些个性化分析，需要自己安装相应的R包，但是由于自己没有root权限，在安装软件时难免会收到这样那样的掣肘。我第一次安装R以失败告终，因为安装R时会告诉你需要A库，然后你去安装A库，但是当你去安装A库的时候又会告诉你需要安装B库，如此循环往复，最后终于心撕力竭，手头又有其他事情要忙，终于铩羽而归。但是有一天遇到王道明，他正好也有过如此安装R的经历，最后捯饬了半天终于成功，最后还把这个经历总结下来，我当时内心狂喜，仿佛得到了武功秘籍。想着终于可以痛快地安装R了，但是事实证明我还是&lt;code&gt;Too young Too simple&lt;/code&gt;,最后还是经历了之前没有预想到的大坑，凭借着王道明的安装指南和R官方文档，才终于功德圆满，取经归来。&lt;/p&gt;
    
    </summary>
    
      <category term="生信/软件" scheme="https://xieduo7.github.io/categories/%E7%94%9F%E4%BF%A1-%E8%BD%AF%E4%BB%B6/"/>
    
    
      <category term="技术" scheme="https://xieduo7.github.io/tags/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="R" scheme="https://xieduo7.github.io/tags/R/"/>
    
  </entry>
  
</feed>
